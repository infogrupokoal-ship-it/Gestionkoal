services:
- type: web
  name: gestion-avisos
  env: python
  plan: free
  buildCommand: pip install -r requirements.txt
  startCommand: waitress-serve --host=0.0.0.0 --port=$PORT --call backend:create_app
  healthCheckPath: /
  preDeployCommand: FLASK_APP=backend:create_app flask init-db || true
  envVars:
    - key: DB_PATH
      value: /var/data/database.db
    - key: UPLOAD_FOLDER
      value: /var/data/uploads
  disks:
    - name: data
      mountPath: /var/data
